{"ts":1348880308521,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"```php\npublic function __construct($host = '127.0.0.1', $port = '23', $timeout = 10){\n\t\t$this->setPrompt(\">\");\n\t\t$this->host = $host;\n\t\t$this->port = $port;\n\t\t$this->timeout = $timeout;\n\t\t\n\t\t// set some telnet special characters\n\t\t$this->NULL = chr(0);\n\t\t$this->DC1 = chr(17);\n\t\t$this->WILL = chr(251);\n\t\t$this->WONT = chr(252);\n\t\t$this->DO = chr(253);\n\t\t$this->DONT = chr(254);\n\t\t$this->IAC = chr(255);\n\t\t\n\t\t$this->connect();  \t\n//appropriate use of tabs, spaces, and line breaks and punctuation\n\n\t}\n\t\n\t/**\n\t* Destructor. Cleans up socket connection and command buffer\n\t* \n\t* @return void \n\t*/\n\tpublic function __destruct() {\n\t\t\n\t\t// cleanup resources\n\t\t$this->disconnect();\n\t\t$this->buffer = NULL;\n\t\t\n\t}\n\t\n\t/**\n\t* Attempts connection to remote host. Returns TRUE if sucessful.      \n\t* \n\t* @return boolean\n\t*/\n\tpublic function connect(){\n\t\t\n\t\t// check if we need to convert host to IP\n\t\tif (!preg_match('/([0-9]{1,3}\\\\.){3,3}[0-9]{1,3}/', $this->host)) {\n\t\t\t\n\t\t\t$ip = gethostbyname($this->host);\n\t\t\t\n\t\t\tif($this->host == $ip){\n\t\t\t\t\n\t\t\t\tthrow new Exception(\"Cannot resolve $this->host\");\n\t\t\t\t\n\t\t\t} else{\n\t\t\t\t$this->host = $ip; \n\t\t\t}\n\t\t}\n\t\t\n\t\t// attempt connection\n\t\t$this->socket = fsockopen($this->host, $this->port, $this->errno, $this->errstr, $this->timeout);\n\t\t\n\t\tif (!$this->socket){        \t\n\t\t\tthrow new Exception(\"Cannot connect to $this->host on port $this->port\");\n\t\t}\n\t\t\n\t\treturn self::TELNET_OK;\n\t}\n\t\n\t/**\n\t* Closes IP socket\n\t* \n\t* @return boolean\n\t*/\n\tpublic function disconnect(){\n\t\tif ($this->socket){\n\t\t\tif (! fclose($this->socket)){\n\t\t\t\tthrow new Exception(\"Error while closing telnet socket\");                \n\t\t\t}\n\t\t\t$this->socket = NULL;\n\t\t}        \n\t\treturn self::TELNET_OK;\n\t}\n```\n//appropriate use of tabs \\n\n//Good use of new lines \\n\n//Good use of spaces  \\n\n        \n    "]],"start1":0,"start2":0,"length1":0,"length2":1800}]],"length":1800}
